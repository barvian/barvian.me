---
import External from '/components/icons/External.vue'
import GitHub from './icons/GitHub.vue'

type Props = {
    href?: string
    secondary?: boolean
    icon?: 'external' | 'github'
}
const { href, secondary = false, icon } = Astro.props
const Tag = href ? 'a' : 'button'

const { Icon = undefined, iconAttr = undefined, iconRight = false } = icon ? ({
    github: {
        Icon: GitHub,
        iconAttr: { class: 'h-5' }
    },
    external: {
        Icon: External,
        iconAttr: { class: 'h-3' },
        iconRight: true
    }
} as const)[icon] : {}
---

<Tag {href} class:list={['leading-snug h-12 font-medium rounded-full flex items-center justify-center gap-3', Astro.slots.has('default') ? 'px-7' : 'aspect-square', secondary ? 'border border-current' : 'bg-black text-white dark:bg-white dark:text-black']}>
    {!iconRight && Icon && <Icon {...iconAttr} />}
    <slot />
    {iconRight && Icon && <Icon {...iconAttr} />}
</Tag>